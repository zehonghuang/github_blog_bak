---
title: 初学Clojure—循环与尾递归
date: 2017-01-19 22:53:37
categories:
- 函数编程
tags:
- clojure
- 并发编程语言
---

Lisp语言中，循环不像Java提供`for`、`while`等语法，经典用法还是使用递归，clojure也有提供loop循环。在clojure中，递归、循环息息相关的工具`recur`，它的存在跟clojure实现在jvm之上有所关系，其原因也跟Java为什么有`for`、`while`等语法相关。

---

- ### <font color=#0099ff>为什么不是真正的尾递归？</font>

ok！在[定义函数](http://huangzehong.me/2017/01/17/20170117-%E5%88%9D%E5%AD%A6Clojure%E2%80%94%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0/)有个计算阶乘的例子。

``` clojure
(letfn [(factorial [x]
          (factorial_2 (- x 1) x))
        (factorial_2 [x y]
          (if (< x 1)
            y
            (factorial_2 (- x 1) (* x y))))]
  #(factorial %))
```

如果在Java中实现“尾递归”，我可以这样写：
``` Java
public  int factorial(int x, int sum) {
  if (x < 2)
    return sum;
  return factorial(x - 1, sum * x);
}
```

如果用Java的循环，可以这样写：
``` Java
public int factorial(int x) {
  int y = 1;
  for(;x > 1; x--)
    y = y * x;
  return y;
}
```
