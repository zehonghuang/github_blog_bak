---
title: è®¾è®¡æ¨¡å¼ï¼è§‚å¯Ÿè€…æ¨¡å¼
date: 2016-05-12 00:34:55
categories:
- è®¾è®¡æ¨¡å¼
tags:
- java
- è®¾è®¡æ¨¡å¼
---

ä¸šåŠ¡æ€»ä¼šæœ‰ç¯ç¯ç›¸æ‰£çš„è”åŠ¨ï¼Œä¸€ç¯å˜åŒ–ä¼šå¼•å‘åç»­ç¯çš„å˜åŠ¨ã€‚ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Œå¯èƒ½ä¼šå¼•å‘ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Œä»Šå¤©æˆ‘å°±è¦è¯´çš„èƒ½å¼•ç”¨æ­¤ç§åœºæ™¯çš„è®¾è®¡æ¨¡å¼â€”â€”è§‚å¯Ÿè€…æ¨¡å¼ã€‚

---

- ### ä¸¾ä¾‹

è¯´å®åœ¨è¯ï¼Œè§‚å¯Ÿè€…æ¨¡å¼åªæ˜¯æ¯”è¾ƒç›´è§‚çš„æ‰‹æ®µâ€”â€”â€œæ³¨å†Œâ€”é€šçŸ¥â€”æ³¨é”€â€ï¼Œå“åº”æŸä¸ªå¯¹è±¡å˜åŒ–çš„æ‰‹æ®µå¹¶ä¸æ­¢å¦‚æ­¤ã€‚å¹¶ä¸”ï¼Œæˆ‘å¯¹è¯¥æ¨¡å¼çš„æŸä¸ªå°ç»†èŠ‚ä¸€ç›´å­˜åœ¨ç–‘æƒ‘ï¼Œä¸‹é¢ä¼šè¯´åˆ°ã€‚

å…ˆç»™å‡ºä¸€ä¸ªæ¨¡ç‰ˆã€‚
``` java
//ä¸»é¢˜æ¶ˆæ¯å®ä½“
class SubjectEntity {
	private String code;
	private String name;
	private String observerName;
	public SubjectEntity(String code, String name) {
		super();
		this.code = code;
		this.name = name;
	}
	public String getCode() {
		return code;
	}
	public void setCode(String code) {
		this.code = code;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getObserverName() {
		return observerName;
	}
	public void setObserverName(String observerName) {
		this.observerName = observerName;
	}
	@Override
	public String toString() {
		return "SubjectEntity [code=" + code + ", name=" + name + ", observerName=" + observerName + "]";
	}
}
//è¢«è§‚å¯Ÿè€…
abstract class Subject {

	private List<Observer> observers = new ArrayList<Observer>();

	public void addObserver(Observer observer) {
		observers.add(observer);
	}

	public void removeObserver(Observer observer) {
		observers.remove(observer);
	}

	public void notifyObserver(SubjectEntity entity) {
		for(Observer observer : observers) {
			observer.update(entity);
		}
	}

}

class SimpleSubject extends Subject {
	public void action(SubjectEntity entity) {
		entity.setName("fuck dick!!!");
		notifyObserver(entity);
	}
}
//è§‚å¯Ÿè€…
interface Observer {
	public void update(SubjectEntity entity);
}

class SimpleObserver implements Observer {

	@Override
	public void update(SubjectEntity entity) {
		System.out.println(entity);
	}

}
```

æˆ‘è¿™é‡ŒæŠŠ`SubjectEntity`ç±»ä½œä¸ºæ¶ˆæ¯çš„å…¨éƒ¨ï¼Œæœ€åä¹Ÿæ˜¯æŠŠè¯¥å¯¹è±¡ä¼ é€’åˆ°`notifyObserver(SubjectEntity entity)`æ–¹æ³•ã€‚

``` java
public class ObserverPattern {
	public static void main(String[] args) {
		SimpleSubject subject = new SimpleSubject();
		subject.addObserver(new SimpleObserver());
		subject.addObserver(new SimpleObserver());
		subject.action(new SubjectEntity("001", "001"));
		subject.action(new SubjectEntity("002", "001"));
	}
}
```

- ### æˆ‘çš„ç–‘æƒ‘

å‡è®¾æˆ‘ä¼ é€’æ¶ˆæ¯æ˜¯è¢«è§‚å¯Ÿè€…æœ¬èº«çš„è¯ï¼Œåˆå¦‚ä½•ï¼Ÿå³
``` java
interface Observer {
	public void update(Subject subject);
}
```

`Subject`ç±»çš„é€šçŸ¥æ–¹æ³•å½“ç„¶è¦æ›´æ”¹
``` java
public void notifyObserver(Subject subject) {
	for(Observer observer : observers) {
		observer.update(subject);
	}
}
```

äºæ˜¯ä¹ï¼Œå½“æˆ‘ä»¬å®ç°`update(Subject subject)`æ—¶ï¼Œå°±æœ‰å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µã€‚
``` java
@Override
public void update(Subject subject) {
	subject.notifyObserver(subject);
}
```
ğŸ‘¿ğŸ‘¿ğŸ‘¿ğŸ‘¿ğŸ‘¿è¿™è®©æˆ‘æƒ…ä½•ä»¥å ªï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
