---
title: 【JRaft源码分析01】启用以及选举过程
date: 2020-03-28 10:21:15
tags:
    - CAP理论
    - RAFT算法
    - 分布式一致性
    - BRAFT
    - JRaft
    - 选举算法
    - java
categories:
    - 分布式框架
---

最近潜心cap理论和raft算法，选用了蚂蚁金服的sofa-jraft，深入研究具体的实现。

---

不多解释raft算法，默认知道，这里只探讨具体的实现。

### 1、启动入口

示例在github的[jraft-example](https://github.com/zehonghuang/sofa-jraft/tree/master/jraft-example)

``` java
RaftGroupService raftGroupService = new RaftGroupService(groupId, serverId, nodeOptions, rpcServer);
//依次实例化NodeManager、NodeImpl、RpcServer
Node node = raftGroupService.start();

public synchronized Node start(final boolean startRpcServer) {
    NodeManager.getInstance().addAddress(this.serverId.getEndpoint());
    this.node = RaftServiceFactory.createAndInitRaftNode(this.groupId, this.serverId, this.nodeOptions);
    if (startRpcServer) {
        this.rpcServer.startup();
    }
}
```
### 2、节点

分布式系统关键单体就是节点Node，它包括raft分布式中需要的所有行为，不限于选举、投票、日志、复制、接收rpc请求等，梦开始的地方。
