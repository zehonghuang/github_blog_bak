---
title: 初学Clojure—集合与数据结构
date: 2017-01-23 23:51:02
categories:
- 函数编程
tags:
- clojure
- 并发编程语言
---

这个很重要，不需要多说，clojure提供了vector、list、queue、set、map这几种数据结构，来看看它们的基本操作。

---

- ### <font color=#0099ff>非写入硬盘的数据持久化</font>

这里说的数据持久化，指的是不变量，即值是不能被改变的。值的不可变，使得我们不需要担心值更新所带来的不确定性，在并发场景下不需要花费过多精力维护数据的准确性。
``` clojure
;声明list
(def lst1 (list 1 2 3 4))
;添加新元素，它重新生产一个“新列表”
(def lst2 (conj lst 5));=(5 1 2 3 4)
;lst引用依旧指向(1 2 3 4)
lst1 ;=(1 2 3 4)
```
为达到值的不可变，而创建一个新值，可能会对此认为这实在浪费内存空间，每次改变值都要重新复制一份出来。

其实不是的，用过git的伙伴都知道，即使在文件里加个空格都会生成一个新的版本号，clojure对值的管理与此一些类型。假如你对`lst1`做任何增删改，所有元素都会存在于它原本的历史版本中，并且每个版本间都共享结构元素。元素5存在于`lst2`这个版本中，`(1 2 3 4)`则`lst1`与`lst2`共享。所有版本会形成一棵数，管理map也是如此，只不过版本树会更加复杂。
